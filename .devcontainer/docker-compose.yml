version: "3.7"

services:
  alpine:
    image: ohmymndy/dotfiles
    command: /bin/sh -c "while sleep 1000; do :; done"
    build:
      dockerfile: Dockerfile
      context: .
      args:
        - PUID=1000
        - PGID=1000
    volumes:
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
        read_only: true
      - type: bind
        source: /
        target: /rootfs
        read_only: true
      - type: bind
        source: ./
        target: /workspace
      - extensions:/home/vscode/.vscode-server/extensions
      - extensions-insiders:/home/vscode/.vscode-server-insiders/extensions

volumes:
  extensions:
  extensions-insiders: